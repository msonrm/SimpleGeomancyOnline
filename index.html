<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ジオマンシー・ワンオラクル</title>
    <meta name="description" content="シンプルなジオマンシー占いアプリ - ワンオラクルでメッセージを受け取ろう">
    <meta name="theme-color" content="#2c3e50">
    
    <!-- PWA manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuOCuOOCquODnuODs+OCt+ODvOODu+ODr+ODs+OCquODqeOCr+ODqyIsCiAgInNob3J0X25hbWUiOiAi44K444Kq44Oe44Oz44K344O844AA44Ov44Oz44Kq44Op44Kv44OrIiwKICAic3RhcnRfdXJsIjogIi4vIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMmMzZTUwIiwKICAidGhlbWVfY29sb3IiOiAiIzJjM2U1MCIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1USTRJaUJvWldsbmFIUTlJakV5T0NJZ2RtbGxkMEp2ZUQwaU1DQXdJREV5T0NBeU9DSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklpQm1hV3hzUFNJalpEVXhaVGhtSWo0S1BHSjFkSFJ2Ym5NZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9OalFnTmpRcElpQm1hV3hzUFNJalpEVXhaVGhtSWo0S1BISmxZM1FnZUQwaU1UZ2lJSGs5SWpFNElpQjNhV1IwYUQwaU9Ua2lJR2hsYVdkb2REODFNQ0lpSUhKNFBTSTFJaUJtYVd4c1BTSWpNVGMwT0RGaklqNEtQSEpsWTNRZ2VEMGlNVGdpSUhrOUlqYzBJaUIzYVdSMGFEMGlPVGtpSUdobGFXZG9kRDBpTXpZaUlISjRQU0kxSWlCbWFXeHNQU0lqTVRjME9ERmpJajRLUEdOcGNtTnNaU0JqZUQwaU5qa2lJR041UFNJMk9DSWdjajBpT1NJZ1ptbHNiRDBpSTJabU16UXpOQ0krQ2lCOEwzTjJaejQ9IiwKICAgICAgInNpemVzIjogIjEyOHgxMjgiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfQogIF0KfQ==">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Hiragino Sans', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #e8dcc6 0%, #d4c4a8 100%);
            min-height: 100vh;
            color: #5d4e37;
            overflow-x: hidden;
        }

        .container {
            max-width: none;
            margin: 0;
            padding: 20px 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .oracle-screen .container {
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-size: 28px;
            font-weight: 300;
            color: #5d4e37;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 16px;
            color: rgba(93,78,55,0.8);
            font-weight: 300;
        }

        .oracle-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 40px 0;
        }

        .oracle-button {
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 24px;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 500;
            color: #5d4e37;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .oracle-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .oracle-button:active {
            transform: translateY(0);
        }

        .oracle-button .emoji {
            font-size: 24px;
            margin-right: 12px;
        }

        .info-section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .info-title {
            font-size: 18px;
            font-weight: 600;
            color: white;
            margin-bottom: 12px;
        }

        .info-text {
            font-size: 14px;
            color: rgba(255,255,255,0.9);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .app-link {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(238,90,36,0.3);
        }

        .app-link:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(238,90,36,0.4);
        }

        .geomancy-symbol {
            text-align: center;
            font-size: 48px;
            color: rgba(255,255,255,0.8);
            margin: 20px 0;
            font-family: monospace;
            line-height: 0.8;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .back-button {
            background: none;
            border: none;
            color: #5d4e37;
            padding: 8px 0;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 0;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .back-button:hover {
            color: #8b7355;
        }

        .oracle-screen {
            text-align: center;
        }

        .oracle-title {
            font-size: 24px;
            color: #5d4e37;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .dot-area {
            background: rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 40px 20px;
            margin: 20px 0;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px dashed rgba(255,255,255,0.3);
        }

        .dot-area:hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.5);
        }

        .dot-instruction {
            color: rgba(255,255,255,0.8);
            font-size: 18px;
            margin-bottom: 20px;
        }

        .dot-zones {
            display: flex;
            flex-direction: column;
            width: 100vw;
            margin: 0;
            border: none;
            border-radius: 0;
            overflow: hidden;
            flex: 1;
        }

        .dot-zone {
            background: rgba(255,255,255,0.6);
            border-bottom: 1px solid rgba(93,78,55,0.3);
            min-height: 100px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            width: 100%;
        }

        .dot-zone:last-child {
            border-bottom: none;
        }

        .dot-zone:hover {
            background: rgba(255,255,255,0.7);
        }

        .dots-display {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 100px;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: #8b7355;
            border-radius: 50%;
            position: absolute;
            transition: all 0.3s ease;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        .zone-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .dot.paired {
            background: #4CAF50;
        }

        .dot-line {
            width: 20px;
            height: 2px;
            background: #4CAF50;
            margin: 0 4px;
        }

        .zone-label {
            position: absolute;
            top: 8px;
            left: 12px;
            font-size: 12px;
            color: rgba(93,78,55,0.6);
            display: none;
        }

        .generate-button {
            background: rgba(93,78,55,0.3);
            border: none;
            color: #5d4e37;
            padding: 16px 32px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            cursor: not-allowed;
            margin: 20px auto;
            transition: all 0.3s ease;
            opacity: 0.5;
        }

        .generate-button.active {
            background: #8b7355;
            color: white;
            cursor: pointer;
            opacity: 1;
        }

        .generate-button.active:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(139,115,85,0.3);
        }

        .dice-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .dice {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .dice:hover {
            transform: scale(1.1);
        }

        .dice.rolling {
            animation: roll 1s infinite;
        }

        @keyframes roll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .roll-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .roll-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(238,90,36,0.4);
        }

        @media (max-width: 480px) {
            .container {
                padding: 16px;
            }
            
            .title {
                font-size: 24px;
            }
            
            .oracle-button {
                padding: 20px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- メイン画面 -->
        <div id="home-screen" class="screen active">
            <div class="header">
                <h1 class="title">ジオマンシー</h1>
            </div>

            <div class="oracle-buttons">
                <button class="oracle-button" onclick="showDotOracle()">
                    <span class="emoji">⚫</span>
                    ワンオラクル（ドット）
                </button>
                
                <button class="oracle-button" onclick="showDiceOracle()">
                    <span class="emoji">🎲</span>
                    ワンオラクル（ダイス）
                </button>
            </div>

            <div class="info-section">
                <h3 class="info-title">ジオマンシーとは</h3>
                <p class="info-text">
                    古代から伝わる土占い。16のシンボルを使って、今のあなたに必要なメッセージを受け取ることができます。ワンオラクルは最もシンプルな占い方で、一つのシンボルからインスピレーションを得ます。
                </p>
                
                <a href="#" class="app-link" onclick="showAppPromo()">
                    📱 Geomancy Diary アプリ
                </a>
            </div>
        </div>

        <!-- ドットオラクル画面 -->
        <div id="dot-oracle-screen" class="screen">
            <div style="padding: 16px 20px 8px 20px;">
                <button class="back-button" onclick="showHome()">← 戻る</button>
            </div>
            
            <div class="dot-zones">
                <div class="dot-zone" onclick="tapZone(event, 0)" ontouchstart="handleTouch(event, 0)">
                    <div class="dots-display" id="zone-0">
                        <canvas class="zone-canvas" id="canvas-0"></canvas>
                    </div>
                </div>
                <div class="dot-zone" onclick="tapZone(event, 1)" ontouchstart="handleTouch(event, 1)">
                    <div class="dots-display" id="zone-1">
                        <canvas class="zone-canvas" id="canvas-1"></canvas>
                    </div>
                </div>
                <div class="dot-zone" onclick="tapZone(event, 2)" ontouchstart="handleTouch(event, 2)">
                    <div class="dots-display" id="zone-2">
                        <canvas class="zone-canvas" id="canvas-2"></canvas>
                    </div>
                </div>
                <div class="dot-zone" onclick="tapZone(event, 3)" ontouchstart="handleTouch(event, 3)">
                    <div class="dots-display" id="zone-3">
                        <canvas class="zone-canvas" id="canvas-3"></canvas>
                    </div>
                </div>
            </div>
            
            <div style="padding: 16px 20px 20px 20px; text-align: center;">
                <p style="color: rgba(93,78,55,0.7); font-size: 14px; margin-bottom: 16px; line-height: 1.4;">
                    各領域を右から左に向かって、思いのままに自由な個数でドットを打ってください。4つの領域すべてにドットが配置されたら「シンボルを生成」ボタンを押してください。ドットの偶数・奇数の組み合わせからジオマンシーのシンボルが決まります。
                </p>
                <button class="generate-button" id="generate-btn" onclick="generateSymbol()">
                    シンボルを生成
                </button>
            </div>
        </div>

        <!-- ダイスオラクル画面 -->
        <div id="dice-oracle-screen" class="screen">
            <button class="back-button" onclick="showHome()">← 戻る</button>
            
            <div class="oracle-screen">
                <h2 class="oracle-title">ダイス占い</h2>
                
                <div class="dice-container">
                    <div class="dice" id="dice1">?</div>
                    <div class="dice" id="dice2">?</div>
                    <div class="dice" id="dice3">?</div>
                    <div class="dice" id="dice4">?</div>
                </div>
                
                <button class="roll-button" onclick="rollAllDice()">ダイスを振る</button>
                
                <p class="info-text" style="color: rgba(255,255,255,0.7); font-size: 14px; margin-top: 20px;">
                    4つのダイスの結果からシンボルが生成されます
                </p>
            </div>
        </div>
    </div>

    <!-- シンボルダイアログ -->
    <div id="symbol-dialog" class="symbol-dialog">
        <div class="symbol-content">
            <div class="symbol-figure" id="symbol-figure"></div>
            <div class="symbol-name" id="symbol-name"></div>
            <div class="symbol-meaning" id="symbol-meaning"></div>
            <button class="dialog-close-btn" onclick="closeSymbolDialog()">閉じる</button>
        </div>
    </div>

    <script>
        // PWA用のサービスワーカー登録
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIGV2ZW50ID0+IHsKICBldmVudC5yZXNwb25kV2l0aChmZXRjaChldmVudC5yZXF1ZXN0KSk7Cn0pOw==')
                .then(() => console.log('SW registered'))
                .catch(() => console.log('SW registration failed'));
            });
        }

        // ドット占い用の変数
        let zoneDots = [[], [], [], []]; // 4つの領域のドット座標
        let isGenerating = false; // 生成中フラグ

        // ジオマンシーのシンボル定義（16種類）
        const geomancySymbols = {
            '1111': { name: 'ヴィア（Via）', meaning: '道・旅・変化への導き。新しい始まりと前進のエネルギーが示されています。', symbol: '•\n•\n•\n•' },
            '2222': { name: 'ポプルス（Populus）', meaning: '人々・集団・社会との調和。周囲との関係性を大切にする時期です。', symbol: '••\n••\n••\n••' },
            '1122': { name: 'コニュンクティオ（Coniunctio）', meaning: '結合・調和・統一。対立していたものが一つになる兆しです。', symbol: '•\n•\n••\n••' },
            '2211': { name: 'カルサー（Carcer）', meaning: '監獄・制限・束縛。一時的な制限の中で内面を見つめる時です。', symbol: '••\n••\n•\n•' },
            '1212': { name: 'フォルトゥナ・マイナー（Fortuna Minor）', meaning: '小さな幸運・内なる力。自分自身の力で道を切り開く時期です。', symbol: '•\n••\n•\n••' },
            '2121': { name: 'フォルトゥナ・マイユール（Fortuna Maior）', meaning: '大きな幸運・外なる力。外部からの支援や好機が訪れます。', symbol: '••\n•\n••\n•' },
            '1221': { name: 'ラエティシア（Laetitia）', meaning: '喜び・楽しさ・満足。心の平安と充実感に満たされる時です。', symbol: '•\n••\n••\n•' },
            '2112': { name: 'トリスティシア（Tristitia）', meaning: '悲しみ・憂鬱・困難。試練を通じて成長する大切な学びの時期です。', symbol: '••\n•\n•\n••' },
            '1211': { name: 'カプト・ドラコニス（Caput Draconis）', meaning: '龍の頭・始まり・入口。新たなサイクルの始まりを告げています。', symbol: '•\n••\n•\n•' },
            '2122': { name: 'カウダ・ドラコニス（Cauda Draconis）', meaning: '龍の尻尾・終わり・出口。一つの段階の完了と次への移行の時です。', symbol: '••\n•\n••\n••' },
            '1112': { name: 'ピューエル（Puer）', meaning: '少年・衝動・行動。情熱的なエネルギーで積極的に行動する時です。', symbol: '•\n•\n•\n••' },
            '2221': { name: 'プエラ（Puella）', meaning: '少女・受容・美。優雅さと受容性で物事を迎え入れる時です。', symbol: '••\n••\n••\n•' },
            '2111': { name: 'アミッシオ（Amissio）', meaning: '失うもの・損失・手放し。手放すことで新しい可能性が生まれます。', symbol: '••\n•\n•\n•' },
            '1222': { name: 'アクイジティオ（Acquisitio）', meaning: '得るもの・獲得・受け取り。努力の成果や新しい恵みを受け取る時です。', symbol: '•\n••\n••\n••' },
            '2211': { name: 'ルベウス（Rubeus）', meaning: '赤・情熱・危険。強い感情に注意深く向き合う必要があります。', symbol: '••\n••\n•\n•' },
            '1122': { name: 'アルブス（Albus）', meaning: '白・純粋・平和。清らかな心で物事を見つめ直す時期です。', symbol: '•\n•\n••\n••' }
        };

        function showDotOracle() {
            hideAllScreens();
            document.getElementById('dot-oracle-screen').classList.add('active');
            resetDotOracle();
        }

        function showDiceOracle() {
            hideAllScreens();
            document.getElementById('dice-oracle-screen').classList.add('active');
            resetDiceOracle();
        }

        function showHome() {
            hideAllScreens();
            document.getElementById('home-screen').classList.add('active');
        }

        function hideAllScreens() {
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.remove('active'));
        }

        function resetDotOracle() {
            zoneDots = [[], [], [], []];
            for (let i = 0; i < 4; i++) {
                const zoneElement = document.getElementById(`zone-${i}`);
                // ドットを削除
                const dots = zoneElement.querySelectorAll('.dot');
                dots.forEach(dot => dot.remove());
                
                // キャンバスをクリア
                const canvas = document.getElementById(`canvas-${i}`);
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            updateGenerateButton();
        }

        function tapZone(event, zoneIndex) {
            event.preventDefault();
            event.stopPropagation();
            
            const zoneElement = document.getElementById(`zone-${zoneIndex}`);
            const rect = zoneElement.getBoundingClientRect();
            
            // タップ座標を取得（領域内の相対座標）
            const x = ((event.clientX - rect.left) / rect.width) * 100;
            const y = ((event.clientY - rect.top) / rect.height) * 100;
            
            addDot(zoneIndex, x, y);
        }

        function handleTouch(event, zoneIndex) {
            event.preventDefault();
            event.stopPropagation();
            
            if (event.touches && event.touches.length > 0) {
                const touch = event.touches[0];
                const zoneElement = document.getElementById(`zone-${zoneIndex}`);
                const rect = zoneElement.getBoundingClientRect();
                
                // タッチ座標を取得（領域内の相対座標）
                const x = ((touch.clientX - rect.left) / rect.width) * 100;
                const y = ((touch.clientY - rect.top) / rect.height) * 100;
                
                addDot(zoneIndex, x, y);
            }
        }

        function addDot(zoneIndex, x, y) {
            // 境界チェック
            if (x < 0 || x > 100 || y < 0 || y > 100) return;
            
            // ドット座標を保存
            zoneDots[zoneIndex].push({ x, y });
            
            // ドットを表示
            const zoneElement = document.getElementById(`zone-${zoneIndex}`);
            const dot = document.createElement('div');
            dot.className = 'dot';
            dot.style.left = `${x}%`;
            dot.style.top = `${y}%`;
            zoneElement.appendChild(dot);
            
            // キャンバスサイズを更新
            const canvas = document.getElementById(`canvas-${zoneIndex}`);
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            updateGenerateButton();
        }

        function updateGenerateButton() {
            const generateBtn = document.getElementById('generate-btn');
            const allZonesHaveDots = zoneDots.every(zone => zone.length > 0);
            
            if (allZonesHaveDots) {
                generateBtn.classList.add('active');
            } else {
                generateBtn.classList.remove('active');
            }
        }

        function generateSymbol() {
            const generateBtn = document.getElementById('generate-btn');
            if (!generateBtn.classList.contains('active')) return;
            
            // 各ゾーンのドットをペアリング
            for (let i = 0; i < 4; i++) {
                animatePairing(i);
            }
            
            // 1.5秒後にシンボル結果を表示
            setTimeout(() => {
                showSymbolResult();
            }, 1500);
        }

        function animatePairing(zoneIndex) {
            const zoneElement = document.getElementById(`zone-${zoneIndex}`);
            const canvas = document.getElementById(`canvas-${zoneIndex}`);
            const ctx = canvas.getContext('2d');
            const dots = zoneElement.querySelectorAll('.dot');
            const dotCoords = zoneDots[zoneIndex];
            
            // キャンバスのサイズを設定
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // ドットを2つずつペアにする
            for (let i = 0; i < dots.length; i += 2) {
                setTimeout(() => {
                    if (i + 1 < dots.length) {
                        // ペア（ドットの色は変更しない）
                        
                        // キャンバスで線を描画
                        const x1 = (dotCoords[i].x / 100) * canvas.width;
                        const y1 = (dotCoords[i].y / 100) * canvas.height;
                        const x2 = (dotCoords[i + 1].x / 100) * canvas.width;
                        const y2 = (dotCoords[i + 1].y / 100) * canvas.height;
                        
                        ctx.strokeStyle = '#8b7355';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(x1, y1);
                        ctx.lineTo(x2, y2);
                        ctx.stroke();
                    } else {
                        // 余りの1つ（色は変更しない）
                    }
                }, i * 100);
            }
        }

        function showSymbolResult() {
            // 各ゾーンの偶奇を計算
            const pattern = zoneDots.map(zone => {
                return zone.length % 2 === 0 ? '2' : '1';
            }).join('');
            
            // シンボルを取得
            let symbol = geomancySymbols[pattern];
            if (!symbol) {
                // パターンが見つからない場合は最初のマッチするものを使用
                const keys = Object.keys(geomancySymbols);
                symbol = geomancySymbols[keys[0]];
            }
            
            alert(`🔮 ${symbol.name}\n\n${symbol.meaning}\n\n${symbol.symbol}`);
        }

        function resetDiceOracle() {
            const dices = document.querySelectorAll('.dice');
            dices.forEach(dice => {
                dice.textContent = '?';
                dice.classList.remove('rolling');
            });
        }

        function rollAllDice() {
            const dices = document.querySelectorAll('.dice');
            
            // アニメーション開始
            dices.forEach(dice => {
                dice.classList.add('rolling');
            });
            
            // 1秒後にダイスの結果を表示
            setTimeout(() => {
                dices.forEach((dice, index) => {
                    dice.classList.remove('rolling');
                    const result = Math.floor(Math.random() * 6) + 1;
                    dice.textContent = result;
                });
                
                // ここで4つのダイスの結果からジオマンシーシンボルを生成
                generateSymbolFromDice();
            }, 1000);
        }

        function generateSymbolFromDice() {
            const dices = document.querySelectorAll('.dice');
            const results = Array.from(dices).map(dice => parseInt(dice.textContent));
            
            // 仮のシンボル生成ロジック（偶数なら••、奇数なら•）
            const symbol = results.map(result => result % 2 === 0 ? '••' : '•');
            
            // 結果表示（仮）
            setTimeout(() => {
                alert('シンボル生成完了！\n' + symbol.join('\n'));
            }, 500);
        }

        function showAppPromo() {
            alert('Geomancy Diary アプリの詳細ページへ移動します\n（実装予定）');
        }

        // タッチ操作の改善
        document.addEventListener('touchstart', function() {}, {passive: true});
    </script>
</body>
</html>
